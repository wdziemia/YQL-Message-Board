<table xmlns="http://query.yahooapis.com/v1/schema/table.xsd">
  <meta>
    <author>Wojciech Dziemianczyk</author>
    <description>Yahoo Message Board</description>
    <sampleQuery>SELECT * FROM {table} WHERE symbol='GOOG';</sampleQuery>
  </meta>

<bindings>
  <select itemPath="" produces="XML">
  <urls>
  	<url>http://finance.yahoo.com/mb/{symbol}/</url>
  </urls>
  <inputs>
  	<key id='symbol' type='xs:string' paramType='variable' required="true" />
  </inputs>
  <execute>
    <![CDATA[
	function getMessages() {
		var results = path;
		var message = <message></message>;
		var popularity = <popularity></popularity>;
		var last = <popularity></popularity>;
		
		for each ( var result in results ) {
			var title = y.xpath(result, "//td[@class='mb-title mb-first']/a/content")
			
    		    	message.appendChild (<title>{title}</title>);
    		    
    		    	messages.appendChild( message );
    		}	
	}
	    
	try {  
		var url = "http://finance.yahoo.com/mb/" + symbol;
	    	var query = y.rest( url );	
	    	var data = query.accept( "text/html" ).get().response;
	    
	    	var path = y.xpath(data, "//table/tbody[@class='mb-ajxp-list mb-sorted-by-la']");
		var size = path.*.length();
		
		var messages = <messages symbol={symbol}> <message>YAY</message> </messages>
		
		if ( size > 0 ){
		
		}
		
		response.object. = messages;
		
	} catch(err) {  
   		response.object = {'result':'failure', 'error': err};  
	} 
	
	  
]]></execute>
</select>
</bindings>
</table>
